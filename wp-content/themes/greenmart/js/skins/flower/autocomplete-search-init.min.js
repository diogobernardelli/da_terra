jQuery(document).ready(function(e){e("input[name=s]").autocomplete({source:function(a,t){e.ajax({url:greenmart_ajax.ajaxurl+"?callback=?&action=greenmart_autocomplete_search",dataType:"json",data:{term:a.term,category:e(".tbay-search-form .dropdown_product_cat").val(),post_type:e(".tbay-search-form .post_type").val()},success:function(e,a,r){t(e)}})},minLength:2,autoFocus:!0,search:function(a,t){e(a.currentTarget).parents(".tbay-search-form").addClass("load")},select:function(e,a){window.location.href=a.item.link},create:function(){e(this).data("ui-autocomplete")._renderItem=function(a,t){var r="";if(""!=t.image)r='<a href="'+t.link+'" title="'+t.label+'"><img class="pull-left" src="'+t.image+'" style="margin-right:10px;"></a>';return r=r+'<div class="name"><a href="'+t.link+'" title="'+t.label+'">'+t.label+"</a></div>",""!=t.price&&(r=r+'<div class="price">'+t.price+"</div> "),e("<li>").append(r).appendTo(a)}},response:function(a,t){0===t.content.length?(e(".tbay-preloader").text("No results found"),e(".tbay-preloader").addClass("no-results")):(e(".tbay-preloader").empty(),e(".tbay-preloader").removeClass("no-results"))},open:function(a,t){e(a.target).parents(".tbay-search-form").removeClass("load"),e(a.target).parents(".tbay-search-form").addClass("active")},close:function(){}}),e(".tbay-preloader").on("click",function(){e(this).parents(".tbay-search-form").removeClass("active"),e(this).parents(".tbay-search-form").find("input[name=s]").val("")})});